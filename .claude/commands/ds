#!/bin/bash

# Design System Shortcut Commands
# Quick access to all design system tools

set -e

# Colors for output
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
BLUE='\033[0;34m'
CYAN='\033[0;36m'
NC='\033[0m'

# Get the script directory
SCRIPT_DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"

show_help() {
    echo -e "${BLUE}üé® Design System Shortcuts${NC}"
    echo -e "${BLUE}=========================${NC}"
    echo ""
    echo -e "${CYAN}Validation Commands:${NC}"
    echo -e "  ${YELLOW}ds check${NC}        - Full design system validation"
    echo -e "  ${YELLOW}ds auto${NC}         - Automatic compliance checking (single run)"
    echo -e "  ${YELLOW}ds watch${NC}        - Watch files and auto-check on changes"
    echo -e "  ${YELLOW}ds ai [file]${NC}    - AI-powered validation with suggestions"
    echo -e "  ${YELLOW}ds typo${NC}         - Typography-only validation"
    echo -e "  ${YELLOW}ds space${NC}        - Spacing-only validation"
    echo -e "  ${YELLOW}ds color${NC}        - Color-only validation"
    echo ""
    echo -e "${CYAN}Generation Commands:${NC}"
    echo -e "  ${YELLOW}ds tokens${NC}       - Generate/update design tokens"
    echo -e "  ${YELLOW}ds component [name] [type]${NC} - Create new component"
    echo -e "  ${YELLOW}ds deploy [path]${NC} - Deploy to new project"
    echo ""
    echo -e "${CYAN}Workflow Commands:${NC}"
    echo -e "  ${YELLOW}ds workflow${NC}     - Interactive development menu"
    echo -e "  ${YELLOW}ds setup${NC}        - Project setup wizard"
    echo -e "  ${YELLOW}ds help${NC}         - Show this help"
    echo ""
    echo -e "${CYAN}Examples:${NC}"
    echo -e "  ${YELLOW}ds check${NC}                    # Validate current directory"
    echo -e "  ${YELLOW}ds auto${NC}                     # Auto-check compliance once"
    echo -e "  ${YELLOW}ds watch${NC}                    # Watch and auto-check on file changes"
    echo -e "  ${YELLOW}ds ai index.html${NC}           # Get AI feedback on file"
    echo -e "  ${YELLOW}ds component Button button${NC}  # Create Button component"
    echo -e "  ${YELLOW}ds deploy ~/new-project${NC}     # Deploy system to project"
    echo ""
}

case "${1:-help}" in
    "check")
    
        echo -e "${BLUE}üîç Running Design System Validation...${NC}"
        "$SCRIPT_DIR/../scripts/design-check.sh" "${2:-.}"
        ;;
    
    "ai")
        if [ -z "$2" ]; then
            echo -e "${RED}‚ùå File required for AI validation${NC}"
            echo "Usage: ds ai [file]"
            exit 1
        fi
        echo -e "${BLUE}ü§ñ Getting AI Feedback...${NC}"
        "$SCRIPT_DIR/../scripts/ai-validation-helper.sh" "$2"
        ;;
    
    "typo"|"typography")
        echo -e "${BLUE}üî§ Checking Typography...${NC}"
        "$SCRIPT_DIR/../scripts/typography-check.sh" "${2:-.}"
        ;;
    
    "space"|"spacing")
        echo -e "${BLUE}üìè Checking Spacing...${NC}"
        "$SCRIPT_DIR/../scripts/spacing-check.sh" "${2:-.}"
        ;;
    
    "color"|"colors")
        echo -e "${BLUE}üé® Checking Colors...${NC}"
        "$SCRIPT_DIR/../scripts/color-check.sh" "${2:-.}"
        ;;
    
    "tokens"|"token")
        echo -e "${BLUE}üé® Generating Design Tokens...${NC}"
        "$SCRIPT_DIR/generate-tokens.sh"
        ;;
    
    "component"|"comp")
        if [ -z "$2" ]; then
            echo -e "${RED}‚ùå Component name required${NC}"
            echo "Usage: ds component [name] [type]"
            echo "Example: ds component Button button"
            exit 1
        fi
        echo -e "${BLUE}üß© Creating Component...${NC}"
        "$SCRIPT_DIR/new-component.sh" "$2" "${3:-component}"
        ;;
    
    "deploy")
        if [ -z "$2" ]; then
            echo -e "${RED}‚ùå Target path required${NC}"
            echo "Usage: ds deploy [path]"
            echo "Example: ds deploy ~/new-project"
            exit 1
        fi
        echo -e "${BLUE}üöÄ Deploying Design System...${NC}"
        "$SCRIPT_DIR/deploy-to-project.sh" "$2"
        ;;
    
    "workflow"|"menu")
        echo -e "${BLUE}‚öôÔ∏è Opening Development Workflow...${NC}"
        "$SCRIPT_DIR/dev-workflow.sh"
        ;;
    
    "setup")
        echo -e "${BLUE}‚öôÔ∏è Running Project Setup...${NC}"
        "$SCRIPT_DIR/setup-project.sh"
        ;;
    
    "help"|"--help"|"-h")
        show_help
        ;;
    
    *)
        echo -e "${RED}‚ùå Unknown command: $1${NC}"
        echo ""
        show_help
        exit 1
        ;;
esac